É uma classe que representa uma **quantidade de tempo** medida em unidades precisas, baseadas em segundos (horas, minutos, segundos e nanossegundos).

Ela é ideal para medir o **tempo decorrido entre eventos de máquina**.

A classe `Duration` é **imutável**.

## Criação com Factory Methods

`Duration` é criada principalmente de duas formas: calculando a diferença entre dois pontos no tempo ou especificando uma quantidade de tempo diretamente.

- `between()`: Calcula a duração exata entre dois objetos temporais (como `Instant`, `LocalTime` ou `LocalDateTime`).
    
- `of...()`: Cria uma duração a partir de uma quantidade específica de dias, horas, minutos, segundos, etc.
    
- `parse()`: Interpreta uma `String` no formato padrão ISO-8601 para durações (`PnDTnHnMn.nS`).
    


```Java
import java.time.Duration;
import java.time.Instant;
import java.time.LocalTime;

// 1. Calculando a diferença entre dois instantes
Instant inicio = Instant.now();
// ... alguma operação demorada ...
Instant fim = Instant.now().plusSeconds(75);
// Simulando 75 segundos depois
Duration tempoDeProcessamento = Duration.between(inicio, fim);

// 2. Criando uma duração a partir de uma quantidade
Duration duracaoDaReuniao = Duration.ofHours(1).plusMinutes(30);
Duration tempoDeTolerancia = Duration.ofSeconds(900);
// 15 minutos

// 3. Interpretando uma String (PT = Period Time)
Duration tempoDoFilme = Duration.parse("PT2H15M");
// 2 horas e 15 minutos

System.out.println("Tempo de Processamento: " + tempoDeProcessamento);
// Saída: PT1M15S (1 minuto e 15 segundos)
System.out.println("Duração da Reunião: " + duracaoDaReuniao);
// Saída: PT1H30M (1 hora e 30 minutos)
System.out.println("Tempo do Filme: " + tempoDoFilme);
// Saída: PT2H15M (2 horas e 15 minutos)
```

Isso nos leva a uma regra de ouro:

> Para comparar o _tamanho_ de duas durações, a forma correta e segura é utilizando o método `.compareTo()`. Ele retorna um valor negativo se a primeira duração for menor, zero se forem iguais, e positivo se for maior.


```Java
Duration umaHora = Duration.ofHours(1);
Duration noventaMinutos = Duration.ofMinutes(90);

// umaHora.compareTo(noventaMinutos) retorna um número negativo
if (umaHora.compareTo(noventaMinutos) < 0) {
    System.out.println("Uma hora é menor que noventa minutos.");
}
```

## Manipulação e Extração de Valores

A manipulação de durações envolve realizar aritmética com quantidades de tempo, como adicionar ou subtrair, ou extrair o valor total em uma unidade específica.

_Isso é fundamental para calcular timeouts, SLAs (Service-Level Agreements), ou simplesmente para apresentar o tempo decorrido de uma forma legível para o usuário._

Para manipular durações, você usa os métodos da própria classe. Para extrair os valores, existem métodos `to...()` para obter o valor total e `to...Part()` (a partir do Java 9) para obter as partes componentes.


```Java
Duration duracaoBase = Duration.ofMinutes(135); // 2 horas e 15 minutos

// Cada método retorna uma NOVA instância de Duration
Duration comTempoExtra = duracaoBase.plusMinutes(10);
Duration comIntervalo = duracaoBase.minus(Duration.ofMinutes(20));

System.out.println("Duração Base: " + duracaoBase);
// Saída: PT2H15M
System.out.println("Com 10 min extra: " + comTempoExtra);
// Saída: PT2H25M
System.out.println("Descontando intervalo: " + comIntervalo);
// Saída: PT1H55M

// Extraindo os valores
System.out.println("\n--- Extraindo valores de PT2H15M ---");
System.out.println("Total em dias: " + duracaoBase.toDays());
// Saída: 0
System.out.println("Total em horas: " + duracaoBase.toHours());
// Saída: 2
System.out.println("Total em minutos: " + duracaoBase.toMinutes());
// Saída: 135
System.out.println("Parte das horas: " + duracaoBase.toHoursPart());
// Saída (Java 9+): 2
System.out.println("Parte dos minutos: " + duracaoBase.toMinutesPart());
// Saída (Java 9+): 15
```

Os métodos da `Duration` permitem fazer cálculos com quantidades de tempo de forma segura e explícita, evitando os erros comuns que ocorriam ao tentar fazer essa mesma aritmética manualmente com milissegundos.